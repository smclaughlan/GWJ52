[gd_scene load_steps=8 format=2]

[ext_resource path="res://Scenes/Objects/Weapons/Gun.gd" type="Script" id=1]
[ext_resource path="res://Scenes/Objects/Projectiles/Flame.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/Objects/Projectiles/Bullet.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/Objects/Projectiles/Light.tscn" type="PackedScene" id=4]
[ext_resource path="res://Scenes/Objects/Weapons/Bang.wav" type="AudioStream" id=5]

[sub_resource type="Gradient" id=1]
offsets = PoolRealArray( 0.0818713, 0.324561, 0.567251, 0.611111, 0.77193 )
colors = PoolColorArray( 0.421875, 0.421875, 0.421875, 1, 0.507812, 0.505665, 0.505665, 1, 0, 0, 0, 1, 0.753906, 0.753906, 0.753906, 1, 0.527344, 0.527344, 0.527344, 1 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )
width = 64

[node name="Gun" type="Node2D"]
script = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]

[node name="TempGunPolygon" type="Polygon2D" parent="Sprite"]
offset = Vector2( 17, 5 )
texture = SubResource( 2 )
texture_rotation_degrees = 90.0
polygon = PoolVector2Array( 18, 11, 21, -27, 77, -28, 76, -16, 48, -16, 32, -8, 32, 15 )

[node name="Ammo" type="Node2D" parent="."]

[node name="Flame" parent="Ammo" instance=ExtResource( 2 )]
visible = false

[node name="Bullet" parent="Ammo" instance=ExtResource( 3 )]
visible = false

[node name="Light" parent="Ammo" instance=ExtResource( 4 )]
visible = false

[node name="MuzzlePosition" type="Position2D" parent="."]
position = Vector2( 103, -18 )

[node name="MuzzleFlash" type="Polygon2D" parent="MuzzlePosition"]
visible = false
position = Vector2( -5, -1 )
rotation = 1.55257
color = Color( 0.756863, 0.815686, 0.0745098, 1 )
polygon = PoolVector2Array( -8, 0, -20, -29, -10, -20, -12, -45, -3, -30, 2, -65, 4, -27, 8, -42, 5, -13, 24, -22, 9, -1, 0, -4 )

[node name="FlashTimer" type="Timer" parent="MuzzlePosition/MuzzleFlash"]
wait_time = 0.1
one_shot = true

[node name="BangNoise" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 5 )

[node name="CockTimer" type="Timer" parent="."]
wait_time = 0.25
one_shot = true

[node name="ReloadTimer" type="Timer" parent="."]

[connection signal="timeout" from="MuzzlePosition/MuzzleFlash/FlashTimer" to="." method="_on_FlashTimer_timeout"]
[connection signal="timeout" from="CockTimer" to="." method="_on_CockTimer_timeout"]
