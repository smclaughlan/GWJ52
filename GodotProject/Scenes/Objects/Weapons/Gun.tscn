[gd_scene load_steps=9 format=2]

[ext_resource path="res://Scenes/Objects/Weapons/Gun.gd" type="Script" id=1]
[ext_resource path="res://Scenes/Objects/Projectiles/Flame.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/Objects/Projectiles/PlayerBullet.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/Objects/Projectiles/Light.tscn" type="PackedScene" id=4]
[ext_resource path="res://Scenes/Objects/Weapons/Bang.wav" type="AudioStream" id=5]

[sub_resource type="Gradient" id=1]
offsets = PoolRealArray( 0.0818713, 0.324561, 0.567251, 0.611111, 0.77193 )
colors = PoolColorArray( 0.421875, 0.421875, 0.421875, 1, 0.507812, 0.505665, 0.505665, 1, 0, 0, 0, 1, 0.753906, 0.753906, 0.753906, 1, 0.527344, 0.527344, 0.527344, 1 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )
width = 64

[sub_resource type="CanvasItemMaterial" id=3]
blend_mode = 1
light_mode = 1

[node name="Gun" type="Node2D"]
script = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
z_index = 1

[node name="TempGunPolygon" type="Polygon2D" parent="Sprite"]
offset = Vector2( 17, 5 )
texture = SubResource( 2 )
texture_rotation_degrees = 90.0
polygon = PoolVector2Array( 18, 11, 21, -27, 77, -28, 76, -16, 48, -16, 32, -8, 32, 15 )

[node name="MuzzleFlash" type="Polygon2D" parent="Sprite"]
material = SubResource( 3 )
position = Vector2( 94.5926, -17 )
color = Color( 0.756863, 0.815686, 0.0745098, 1 )
polygon = PoolVector2Array( 1.66176, -4, 0, -19, 7, -11, 24, -23, 13, -7, 65, -9, 23, -2, 41, 12, 10, 5, 23, 27, -1.55883, 9, 2.73529, 4 )

[node name="FlashTimer" type="Timer" parent="Sprite/MuzzleFlash"]
wait_time = 0.1
one_shot = true

[node name="MuzzlePosition" type="Position2D" parent="Sprite"]
position = Vector2( 115, -18 )

[node name="Ammo" type="Node2D" parent="."]

[node name="Bullet" parent="Ammo" instance=ExtResource( 3 )]
visible = false
bullet_speed = 800.0
bullet_damage = 40.0

[node name="Flame" parent="Ammo" instance=ExtResource( 2 )]
visible = false

[node name="Light" parent="Ammo" instance=ExtResource( 4 )]
visible = false

[node name="BangNoise" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 5 )
volume_db = 7.0

[node name="CockTimer" type="Timer" parent="."]
wait_time = 0.15
one_shot = true

[node name="ReloadTimer" type="Timer" parent="."]

[connection signal="timeout" from="Sprite/MuzzleFlash/FlashTimer" to="." method="_on_FlashTimer_timeout"]
[connection signal="timeout" from="CockTimer" to="." method="_on_CockTimer_timeout"]
